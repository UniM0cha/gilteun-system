# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is an Electron-based desktop application built with React, TypeScript, and Vite. The project uses a modern
development stack with Electron for cross-platform desktop functionality, React for the UI layer, and Vite for fast
development and building.

## Architecture

**Electron Process Architecture:**

- `electron/main.ts` - Main Electron process that creates and manages windows
- `electron/preload.ts` - Preload script that exposes secure IPC APIs to the renderer
- `src/` - React renderer process (the UI application)

**Key Directories:**

- `src/` - React application source code
- `electron/` - Electron main and preload processes
- `dist/` - Built web assets (generated by Vite)
- `dist-electron/` - Built Electron processes
- `public/` - Static assets served by the web app

**Build Output Structure:**

```
dist/           # Web app build (Vite output)
├── index.html
└── assets/
dist-electron/  # Electron processes build
├── main.js
└── preload.mjs
```

## Development Commands

**Development workflow:**

```bash
npm run dev        # Start development server with hot reload
npm run build      # Full production build (TypeScript → Vite → Electron Builder)
npm run lint       # Run ESLint with TypeScript rules
npm run preview    # Preview production build
```

**Development server details:**

- Vite dev server runs the React app with HMR
- Electron loads the dev server URL in development
- Changes to React code auto-reload, changes to Electron processes require restart

## TypeScript Configuration

**Dual TypeScript configs:**

- `tsconfig.json` - Main config for src/ and electron/ directories
- `tsconfig.node.json` - Node.js config for build tools (Vite config, etc.)

**Key compiler settings:**

- ES2020 target with modern JavaScript features
- Strict mode enabled with unused variable checking
- React JSX transform (no React import needed)
- Module resolution set to "bundler" for Vite compatibility

## Electron-Specific Considerations

**IPC Communication:**

- Use the preload script APIs exposed via `window.ipcRenderer`
- Main process communicates with renderer via `webContents.send()`
- Example: Main process sends timestamp on window load

**Security:**

- Context isolation enabled by default
- Node.js APIs not directly accessible in renderer
- Use preload script to expose safe APIs

**Platform Packaging:**

- `electron-builder.json5` configures multi-platform builds
- Output directory: `release/${version}/`
- Supports macOS (DMG), Windows (NSIS), Linux (AppImage)

## Key Dependencies

**Runtime:**

- `electron` - Desktop app framework
- `react` + `react-dom` - UI framework

**Build Tools:**

- `vite` - Fast build tool and dev server
- `vite-plugin-electron` - Electron integration for Vite
- `electron-builder` - Cross-platform packaging
- `@vitejs/plugin-react` - React support in Vite

## Linting & Code Quality

ESLint configuration in `.eslintrc.cjs`:

- TypeScript ESLint rules
- React Hooks linting
- React Refresh plugin for HMR compatibility

**Lint command:** `npm run lint`
