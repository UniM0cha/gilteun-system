# **✅ 프로젝트 명: 길튼 시스템**

---

## **💡 프로젝트 개요**

‘길튼 시스템’은 **교회 찬양팀 예배 진행을 지원하기 위한 PWA 기반의 웹 애플리케이션**입니다.

모든 찬양팀원(세션)은 **각자의 아이패드**를 소지하고 예배에 참여하며, 해당 앱은 **iPad 친화적인 터치 중심 UI**로 설계되어야 합니다.

### **핵심 목적**

- 실시간 **악보 공유 및 마크업**
- **인도자 명령 전달** 기능
- **세션 구성원 간 시각적 동기화**
- 클라이언트는 **설치 없이 웹 브라우저로 접근**, 서버는 macOS에서 **Electron 기반 앱**으로 실행

---

## **🧩 기능 상세 정의**

### **1. 악보 공유 및 마크업**

- 예배별로 **악보 이미지를 업로드 및 열람**할 수 있음
  - PDF는 **제외**, JPG, PNG 등 **이미지 파일만 허용**
- 악보는 **모든 사용자가 열람 가능**
- 악보 위에 **자유롭게 드로잉 가능**
  - 예: **송폼 표시**, **코드 마킹**, **강조 라인** 등
  - 실시간 동기화 필수
- 보기 모드 / 그리기 모드 전환 가능
- 각 세션 사용자(찬양팀원)는 **현재 보고 있는 악보 페이지**를 서버에 전송하고 공유

---

### **2. 사용자 역할 및 UI 모드**

역할에 따라 UI 기능이 다음과 같이 달라짐:

| **역할**             | **권한 및 기능**                           |
| -------------------- | ------------------------------------------ |
| 세션 사용자          | 악보 열람, 마크업 가능, 명령 수신 가능     |
| 인도자               | 악보 열람, 마크업 가능, 명령 전송 가능     |
| 목사님 (전체 관리자) | 인도자 권한 포함 + **전체 명령 전송** 가능 |

- **앱 최초 실행 시 프로필 선택 또는 생성**
  - 설정 항목: 역할, 닉네임, 아이콘, 자주 사용하는 명령 아이콘

---

### **3. 명령 시스템**

- 인도자(또는 목사님)가 전송한 명령은 모든 사용자에게 **악보를 가리지 않는 오버레이 UI**로 표시
- 예: 절 이동, 반복, 다음 곡 등 다양한 지시 명령
- 명령 종류는 **기본 제공 + 사용자 커스터마이징 가능**
- 사용자마다 자신만의 명령 이모티콘 또는 텍스트를 등록하고 사용할 수 있음
- 명령 정보는 서버를 통해 실시간 동기화됨

---

### **4. 통신 구조 및 동기화**

- 모든 기기는 동일한 **Wi-Fi 네트워크 상에서 통신**
- 데이터는 로컬 서버를 통해 동기화됨
  - 서버는 **macOS에서 Electron 앱**으로 실행
  - Electron 앱은 웹 서버 + 관리용 UI를 포함
- 클라이언트 웹 앱과 서버 간 데이터 흐름 예시:
  - 세션 사용자가 악보 페이지 이동 → 서버에 현재 페이지 상태 전송
  - 인도자가 명령 전송 → 서버가 전체 사용자에게 브로드캐스트
  - 드로잉 내용 → 서버에서 실시간 중계

---

## **🔧 기술 스택 및 구현 방식**

### **클라이언트(PWA 웹 앱)**

- **React** 기반 SPA
- **React Router v7** 사용
- UI 프레임워크: **shadcn/ui**
- 데이터 페칭: **react-query**
- 전역 상태 관리: **Zustand**
- 배포 방식: **PWA**로 설치 없이 브라우저에서 사용
- 타겟 디바이스: **iPad 중심 UI 구성**, 멀티터치, 큰 터치 대상, 전체 화면 최적화

### **서버(Electron + Node)**

- macOS에서 실행 가능한 **Electron 기반 데스크탑 앱**
- 내부에 **웹 서버 포함 (예: Express)**
- 상태 조회 및 제어용 UI 포함 (React + shadcn/ui)
- React Router v7로 서버 내 UI 라우팅 구성
- 서버는 전체 클라이언트의 상태를 실시간으로 추적 및 동기화 수행

---

## **📋 페이지 구성 및 예상 컴포넌트 (클라이언트 기준)**

### **1. 홈 / 프로필 선택 화면**

- 기존 프로필 선택
- 새 프로필 생성 (이름, 역할, 아이콘, 자주 쓰는 명령 등록)

### **2. 예배 화면**

- 좌측: 악보 페이지 네비게이션
- 중앙: 악보 이미지 뷰어
- 드로잉 툴바 (보기/그리기 전환, 색상 선택 등)
- 우측 또는 하단: 명령 오버레이 표시

### **3. 명령 전송 패널 (인도자/목사님만)**

- 미리 등록한 명령 리스트
- 새 명령 추가 기능
- 명령 전송 버튼

---

## **📡 데이터 동기화 항목 요약**

| **항목**         | **송신 주체** | **수신 대상**      | **실시간** |
| ---------------- | ------------- | ------------------ | ---------- |
| 악보 페이지 상태 | 세션 사용자   | 서버 → 전체 사용자 | O          |
| 드로잉 정보      | 세션 사용자   | 서버 → 전체 사용자 | O          |
| 명령 전송        | 인도자        | 서버 → 전체 사용자 | O          |
| 사용자 접속 상태 | 모든 사용자   | 서버               | O          |

---

## **⚙️ 개발 및 테스트 시 유의사항**

- 클라이언트는 **설치 없이 브라우저 접속만으로 사용** 가능해야 함
- 서버는 반드시 macOS에서 Electron 앱 형태로 구동
- 전체 앱은 **오프라인 캐싱(PWA 기능)** 을 고려할 필요는 없음 (Wi-Fi 상시 연결 가정)
- **다중 사용자 동시 접속 환경**에서도 성능 저하 없이 동작해야 함

---

## 프로젝트 실행 방법

### 루트 패키지 설치

```bash
npm install
```

위 명령은 클라이언트와 서버 워크스페이스의 의존성을 한 번에 설치합니다.

### 클라이언트 실행

```bash
npm run dev -w client
```

### 서버 실행

```bash
npm start -w server
```

### 린트 실행

```bash
npm run lint
```

루트에서 위 명령을 실행하면 클라이언트와 서버 두 프로젝트의 린트가 연달아 수행됩니다.
